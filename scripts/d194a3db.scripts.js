(function(){"use strict";angular.module("watchlistWebApp",["ngCookies","ngResource","ngSanitize","ngRoute","ngAnimate","wu.masonry","infinite-scroll","angular-md5"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl"}).when("/users",{templateUrl:"views/users.html",controller:"UsersCtrl"}).when("/profile/:userId",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/movies",{templateUrl:"views/movies.html",controller:"MoviesCtrl"}).when("/movie/:movieId",{templateUrl:"views/movie.html",controller:"MovieCtrl"}).when("/search",{templateUrl:"views/search.html",controller:"SearchCtrl"}).when("/cinemas/:zipcode",{templateUrl:"views/cinemas.html",controller:"CinemasCtrl"}).when("/dvds/:movieTitle",{templateUrl:"views/dvds.html",controller:"DvdsCtrl"}).when("/itunes/:movieTitle",{templateUrl:"views/itunes.html",controller:"ItunesCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/company/:companyId",{templateUrl:"views/company.html",controller:"CompanyCtrl"}).when("/genre/:genreId",{templateUrl:"views/genre.html",controller:"GenreCtrl"}).when("/actor/:actorId",{templateUrl:"views/actor.html",controller:"ActorCtrl"}).when("/ebay/:movieTitle",{templateUrl:"views/ebay.html",controller:"EbayCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("watchlistWebApp").controller("MainCtrl",["$scope",function(a){return a.signupHidden=!0,a.signupToggle=function(){return a.signupHidden=a.signupHidden?!1:!0}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("SignupCtrl",["$scope","$http","Geolocation",function(a,b,c){return a.formData={},a.detectLocation=function(){return window.navigator.geolocation.getCurrentPosition(function(b){return c.getAddressByPosition(b,function(b){return a.address=b,console.log(b),a.formData.address=b.results[2].formatted_address})})},a.validateForm=function(){return a.formData.password!==a.formData.confirmation?(a.errorPassword="Passwords mismatch",a.validationSuccessful=!1):(a.errorPassword="",a.validationSuccessful=!0)},a.processForm=function(){return a.validateForm()?b({method:"POST",url:"http://watchlist-app-server.herokuapp.com/user",data:$.param(a.formData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){return console.log(a)}).error(function(b){return console.log(b),b.errors[0].ValidationError?(a.errorName=b.errors[0].ValidationError.name?"Please provide valid name":"",a.errorEmail=b.errors[0].ValidationError.email?"Please provide valid email":"",a.errorPassword=b.errors[0].ValidationError.password?"Password must contain at least 6 characters":"",a.errorMessage="Validation error!"):(a.errorEmail="User with email: "+a.formData.email+" is already registered",a.errorMessage="Email already registered")}):void 0}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("UsersCtrl",["$scope","Userservice",function(a,b){return a.users=b.query()}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("ProfileCtrl",["$scope","$routeParams","md5","Userservice","$location","Sessionservice",function(a,b,c,d,e,f){return a.user=d.get({id:b.userId}),a.deleteUser=function(){return d["delete"]({id:a.user.id}),e.path("/users")},a.logIn=function(){return f.logIn(a.user)}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Userservice",["$resource",function(a){return a("http://watchlist-app-server.herokuapp.com/user")}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("MoviesCtrl",["$scope","Themoviedb",function(a,b){var c,d;return a.movies=[],c=1,d=!0,a.imageSize="w300",a.activeSize=4,a.isActive=function(b){return b===a.activeSize?!0:void 0},a.setSize=function(b){return a.activeSize=b,a.imageSize=function(){switch(b){case 1:return"w92";case 2:return"w154";case 3:return"w185";case 4:return"w300";case 5:return"w500"}}()},a.loadMore=function(){return d?(d=!1,b.popularMovies(c,function(b){return a.movies=a.movies.concat(b.results),d=!0,c++})):void 0},a.loadMore()}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Themoviedb",["$resource","$http",function(a,b){var c;return c="http://watchlist-koa.herokuapp.com/tmdb/3/",this.imageURL="http://d3gtl9l2a4fn1j.cloudfront.net/t/p/",this.imageOriginal="original",this.imageLarge="w500",this.imageMedium="w342",this.imageSmall="w185",this.imageTiny="w154",this.popularMovies=function(a,d){return b({method:"GET",url:c+"movie/popular",params:{page:a}}).success(function(a){return d(a)})},this.getMovie=function(a,d){return b({method:"GET",url:c+"movie/"+a,params:{append_to_response:"trailers,credits"}}).success(function(a){return d(a)})},this.searchForMovie=function(a,d){return b({method:"GET",url:c+"search/movie",params:{query:a}}).success(function(a){return d(a)})},this.getCompany=function(a,d){return b({method:"GET",url:c+"company/"+a}).success(function(a){return d(a)})},this.getMoviesForCompany=function(a,d){return b({method:"GET",url:c+"company/"+a+"/movies"}).success(function(a){return d(a)})},this.getGenre=function(a,d){return b({method:"GET",url:c+"genre/"+a}).success(function(a){return d(a)})},this.getMoviesForGenre=function(a,d){return b({method:"GET",url:c+"genre/"+a+"/movies"}).success(function(a){return d(a)})},this.getActor=function(a,d){return b({method:"GET",url:c+"person/"+a}).success(function(a){return d(a)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("MovieCtrl",["$scope","$routeParams","$sce","Themoviedb","Listservice","Sessionservice",function(a,b,c,d,e,f){return d.getMovie(b.movieId,function(b){var e;return a.movie=b,a.poster=d.imageURL+d.imageLarge+b.backdrop_path,e=null!=b.trailers.youtube[0]?b.trailers.youtube[0].source:void 0,a.trailerURL=c.trustAsResourceUrl("http://www.youtube.com/embed/"+e)}),a.addToWatchlist=function(){return e.addMovie(f.authentificatedUser.id,"watchlist",a.movie.id,function(a){return console.log(a)})},a.actorPhoto=function(a){var b;return b=d.imageURL+d.imageTiny+a}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("SearchCtrl",["$scope","Themoviedb",function(a,b){return a.search=function(){return b.searchForMovie(a.searchPhrase,function(b){return a.results=b.results})}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Fandango",["FeedLoader",function(a){return this.newMovies=function(b,c){var d;return d="http://www.fandango.com/rss/moviesnearme_"+b+".rss",a.fetch({q:d,num:10},{},function(a){return c(a.responseData.feed)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("CinemasCtrl",["$scope","$routeParams","Fandango",function(a,b,c){return a.cinemas=c.newMovies(b.zipcode,function(b){return a.cinemas=b.entries})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").factory("FeedLoader",["$resource",function(a){return a("http://ajax.googleapis.com/ajax/services/feed/load",{},{fetch:{method:"JSONP",params:{v:"2.0",callback:"JSON_CALLBACK"}}})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Amazon",["$http",function(a){var b;return b="http://watchlist-koa.herokuapp.com/amazon/DVD",this.getDvds=function(c,d){return a({method:"GET",url:b,params:{title:c}}).success(function(a){return d(a)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("DvdsCtrl",["$scope","$routeParams","Amazon",function(a,b,c){var d;return d=b.movieTitle,c.getDvds(d,function(b){return a.dvds=b})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Itunes",["$http",function(a){var b;return b="https://itunes.apple.com/search",this.getOffers=function(c,d){return a({method:"JSONP",url:b,params:{term:c,entity:"movie",callback:"JSON_CALLBACK"}}).success(function(a){return d(a.results)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("ItunesCtrl",["$scope","$routeParams","Itunes",function(a,b,c){var d;return d=b.movieTitle,c.getOffers(d,function(b){return a.offers=b})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Geolocation",["$http",function(a){var b;return b="http://maps.googleapis.com/maps/api/geocode/json",this.getAddressByPosition=function(c,d){var e;return e=c.coords.latitude+","+c.coords.longitude,a({method:"GET",url:b,params:{latlng:e,sensor:!1}}).success(function(a){return d(a)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Sessionservice",["$cookies",function(a){return this.authentificatedUser={name:a.username,email:a.email,id:a.id},this.logIn=function(b){return this.authentificatedUser={name:b.name,email:b.email,id:b.id},a.username=b.name,a.email=b.email,a.id=b.id},this.logOut=function(){return delete a.username,delete a.email,delete a.id,this.authentificatedUser={}},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("LoginCtrl",["$scope","$http","Sessionservice","$location","Userservice",function(a,b,c,d,e){var f,g,h,i,j,k,l;return k=null,a.processForm=function(){return f(),g()?j(function(){return l()&&i()?h():void 0}):void 0},f=function(){return delete a.errorEmail,delete a.errorPassword},h=function(){return c.logIn(k),d.path("/profile/"+k.id)},l=function(){return null==k&&(a.errorEmail="user not found"),null==a.errorEmail?!0:void 0},i=function(){return k.password!==a.password&&(a.errorPassword="invalid password"),null==a.errorPassword?!0:void 0},g=function(){return(null==a.email||""===a.email)&&(a.errorEmail="please enter email"),null==a.errorEmail?!0:void 0},j=function(b){return k=null,e.query({email:a.email},function(a){return null!=a[0]&&(k=a[0]),b()})}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("HeaderController",["$scope","$location","Sessionservice",function(a,b,c){return a.session=c,a.isActive=function(a){return a===b.path()},a.logOut=function(){return c.logOut()}}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Listservice",["$http",function(a){var b;return b="http://watchlist-app-server.herokuapp.com/list",this.addMovie=function(c,d,e,f){return a({method:"GET",url:b+"/addMovie",params:{listTitle:d,userId:c,movieId:e}}).success(function(a){return f(a)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("CompanyCtrl",["$scope","$routeParams","Themoviedb","Sessionservice",function(a,b,c){return c.getCompany(b.companyId,function(b){return a.company=b,a.logo=c.imageURL+c.imageLarge+b.logo_path,c.getMoviesForCompany(a.company.id,function(b){return a.movies=b.results})})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("GenreCtrl",["$scope","$routeParams","Themoviedb","Sessionservice",function(a,b,c){return c.getGenre(b.genreId,function(b){return a.genre=b.name}),c.getMoviesForGenre(b.genreId,function(b){return a.movies=b.results})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("ActorCtrl",["$scope","$routeParams","Themoviedb","Listservice","Sessionservice",function(a,b,c){return c.getActor(b.actorId,function(b){return a.actor=b,a.photo=c.imageURL+c.imageLarge+b.profile_path})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").directive("movie",function(){return{templateUrl:"views/movie-directive.html",restrict:"E"}})}.call(this),function(){"use strict";angular.module("watchlistWebApp").directive("movieGrid",function(){return{templateUrl:"views/movie-grid-directive.html",restrict:"E",link:function(a){return a.imageSize="w300"}}})}.call(this),function(){"use strict";angular.module("watchlistWebApp").directive("signupForm",function(){return{templateUrl:"views/signup.html",restrict:"E",controller:"SignupCtrl"}})}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Ebay",["$http",function(a){var b;return b="http://watchlist-koa.herokuapp.com/ebay",this.getOffers=function(c,d){return a({method:"GET",url:b,params:{"OPERATION-NAME":"findItemsByKeywords",keywords:c}}).success(function(a){return d(a.findItemsByKeywordsResponse[0].searchResult[0].item)})},this}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").service("Rottentomatoes",function(){})}.call(this),function(){"use strict";angular.module("watchlistWebApp").controller("EbayCtrl",["$scope","$routeParams","Ebay",function(a,b,c){var d;return d=b.movieTitle,c.getOffers(d,function(b){return a.offers=b,console.log(b)})}])}.call(this),function(){"use strict";angular.module("watchlistWebApp").directive("movieListItem",["Themoviedb",function(a){return{templateUrl:"views/movie-list-item-directive.html",restrict:"E",link:function(b){return a.getMovie(b.movieId,function(a){return b.movie=a})}}}])}.call(this);